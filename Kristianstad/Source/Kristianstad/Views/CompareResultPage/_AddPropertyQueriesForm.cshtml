@model Kristianstad.ViewModels.Compare.CompareResultPageModel 
    
@using (Html.BeginForm("SaveResultQueries", "CompareResultPage"))
{
    @Html.AntiForgeryToken()

    <ul class="accordion" data-accordion data-multi-expand="true" data-allow-all-closed="true">

        @for (int i = 0; i < Model.PropertyQueryGroupsFromSources.Count; i++)
        {
            <li class="accordion-item accordion-navigation" data-accordion-item>
                <a data-target="panel@(i)" class="accordion-title">@Model.PropertyQueryGroupsFromSources[i].Name</a>
                <div id="panel@(i)" class="accordion-content" data-tab-content>

                    <table>
                        <thead>
                            <tr>
                                <th>Använd</th>
                                <th>Titel</th>
                                <th>Id</th>
                            </tr>
                        </thead>
                        <tbody>

                            @for (int j = 0; j < Model.PropertyQueryGroupsFromSources[i].PropertyQueries.Count; j++)
                            {
                                <tr>
                                    <td>
                                        @Html.CheckBoxFor(x => x.PropertyQueryGroupsFromSources[i].PropertyQueries[j].Use, new { title = Model.PropertyQueryGroupsFromSources[i].PropertyQueries[j].Use ? "Kryssa ur för att ta bort frågan från jämförelsen" : "Kryssa i för att lägga till frågan till jämförelsen" })
                                        @Html.HiddenFor(x => x.PropertyQueryGroupsFromSources[i].PropertyQueries[j].UseBefore)
                                        @Html.HiddenFor(x => x.PropertyQueryGroupsFromSources[i].PropertyQueries[j].SourceName)
                                        @Html.HiddenFor(x => x.PropertyQueryGroupsFromSources[i].PropertyQueries[j].SourceId)
                                        @Html.HiddenFor(x => x.PropertyQueryGroupsFromSources[i].PropertyQueries[j].Name)
                                    </td>
                                    <td>
                                        @Model.PropertyQueryGroupsFromSources[i].PropertyQueries[j].Name
                                    </td>
                                    <td>
                                        @Model.PropertyQueryGroupsFromSources[i].PropertyQueries[j].SourceId
                                    </td>
                                </tr>
                            }

                        </tbody>
                    </table>

                </div>

            </li>
        }

    </ul>

    <input type="submit" value="Spara frågor" />

    @*
    <script type="text/javascript">

        $(document).load(function () {

            $(".accordion-title").each(function () {
                $(this).click(function (e) {
                    e.preventDefault();
                    var targetId = $(this).attr('data-target');

                    // toggle the accordion item
                    $('.accordion').foundation('toggle', $('#' + targetId));
                });
            });

        });

    </script>
    *@
}